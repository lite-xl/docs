<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Lightweight and powerful code editor, available for Windows, Linux and macOS." name=description><meta content=Takase name=author><link href=https://takase1121.github.io/lite-xl-docs/user-guide/using-regular-expressions/ rel=canonical><link href=../simple-plugin/ rel=prev><link href=../interacting-with-the-os/ rel=next><link href=../../assets/favicon.png rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-9.0.3" name=generator><title>Using regular expressions - Lite XL</title><link href=../../assets/stylesheets/main.6b71719e.min.css rel=stylesheet><link href=../../assets/stylesheets/palette.2505c338.min.css rel=stylesheet><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta content=website property=og:type><meta content="Using regular expressions - Lite XL" property=og:title><meta content="Lightweight and powerful code editor, available for Windows, Linux and macOS." property=og:description><meta content=https://takase1121.github.io/lite-xl-docs/assets/images/social/user-guide/using-regular-expressions.png property=og:image><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><meta content=https://takase1121.github.io/lite-xl-docs/user-guide/using-regular-expressions/ property=og:url><meta content=summary_large_image name=twitter:card><meta content="Using regular expressions - Lite XL" name=twitter:title><meta content="Lightweight and powerful code editor, available for Windows, Linux and macOS." name=twitter:description><meta content=https://takase1121.github.io/lite-xl-docs/assets/images/social/user-guide/using-regular-expressions.png name=twitter:image><link href=../../assets/stylesheets/custom.min.css rel=stylesheet><script src=../../assets/javascript/custom.min.js></script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent data-md-color-primary data-md-color-scheme=default dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#regex-api> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Lite XL" class="md-header__button md-logo" data-md-component=logo href=../.. title="Lite XL"> <img alt=logo src=../../assets/icon.svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Lite XL </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Using regular expressions </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary data-md-color-scheme=default id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary data-md-color-scheme=slate id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/takase1121/lite-xl-docs/ title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../..> Home </a> </li> <li class=md-tabs__item> <a href=../../setup/getting-started/ class=md-tabs__link> Set Up </a> </li> <li class=md-tabs__item> <a href=../keymap/ class="md-tabs__link md-tabs__link--active"> User Guide </a> </li> <li class=md-tabs__item> <a href=../../references/contributors/ class=md-tabs__link> References </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Lite XL" class="md-nav__button md-logo" data-md-component=logo href=../.. title="Lite XL"> <img alt=logo src=../../assets/icon.svg> </a> Lite XL </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/takase1121/lite-xl-docs/ title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../..> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 id=__nav_2 type=checkbox> <label aria-expanded=false class=md-nav__link for=__nav_2 tabindex=0> Set Up <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Set Up" class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Set Up </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../setup/getting-started/ class=md-nav__link> Getting Started </a> </li> <li class=md-nav__item> <a href=../../setup/windows/ class=md-nav__link> Windows </a> </li> <li class=md-nav__item> <a href=../../setup/linux/ class=md-nav__link> Linux </a> </li> <li class=md-nav__item> <a href=../../setup/macos/ class=md-nav__link> macOS </a> </li> <li class=md-nav__item> <a href=../../setup/building/ class=md-nav__link> Building </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 id=__nav_3 type=checkbox> <label aria-expanded=true class=md-nav__link for=__nav_3 tabindex=0> User Guide <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="User Guide" class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../keymap/ class=md-nav__link> Keymap </a> </li> <li class=md-nav__item> <a href=../creating-syntaxes/ class=md-nav__link> Creating Syntaxes </a> </li> <li class=md-nav__item> <a href=../simple-plugin/ class=md-nav__link> Simple Plugin </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> Using regular expressions <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Using regular expressions </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#example-matching-capture-groups-with-a-regular-expression> Example: matching capture groups with a regular expression </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#another-example-replacing-words-with-a-regular-expression> Another example: replacing words with a regular expression </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-the-regex-api> Using the Regex API </a> <nav aria-label="Using the Regex API" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#creating-a-regex> Creating a regex </a> <nav aria-label="Creating a regex" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example> Example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#matching-text> Matching text </a> <nav aria-label="Matching text" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example_1> Example </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#example_2> Example </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#example_3> Example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#string-substitution> String substitution </a> <nav aria-label="String substitution" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#replacement-string> Replacement string </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#example_4> Example </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../interacting-with-the-os/ class=md-nav__link> Interacting with the OS </a> </li> <li class=md-nav__item> <a href=../child-processes/ class=md-nav__link> Child processes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 id=__nav_4 type=checkbox> <label aria-expanded=false class=md-nav__link for=__nav_4 tabindex=0> References <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=References class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../references/contributors/ class=md-nav__link> Contributors </a> </li> <li class=md-nav__item> <a href=../../references/keymap/ class=md-nav__link> Keymap </a> </li> <li class=md-nav__item> <a href=../../references/macos-keymap/ class=md-nav__link> macOS Keymap </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#example-matching-capture-groups-with-a-regular-expression> Example: matching capture groups with a regular expression </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#another-example-replacing-words-with-a-regular-expression> Another example: replacing words with a regular expression </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-the-regex-api> Using the Regex API </a> <nav aria-label="Using the Regex API" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#creating-a-regex> Creating a regex </a> <nav aria-label="Creating a regex" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example> Example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#matching-text> Matching text </a> <nav aria-label="Matching text" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example_1> Example </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#example_2> Example </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#example_3> Example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#string-substitution> String substitution </a> <nav aria-label="String substitution" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#replacement-string> Replacement string </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#example_4> Example </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/takase1121/lite-xl-docs/edit/master/docs/user-guide/using-regular-expressions.md title="Edit this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"></path></svg> </a> <a class="md-content__button md-icon" href=https://github.com/takase1121/lite-xl-docs/raw/master/docs/user-guide/using-regular-expressions.md title="View source of this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"></path></svg> </a> <h1 id=regex-api>Regex API</h1> <p>This API provides PCRE (Perl-Compatible Regular Expressions) and is written in C and Lua. The API bears some similarity to Lua's pattern library with some differences.</p> <h2 id=example-matching-capture-groups-with-a-regular-expression>Example: matching capture groups with a regular expression</h2> <div class=highlight><pre><span></span><code><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=s2>"hello world hello world"</span>
<a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a><span class=kr>for</span> <span class=n>hello</span><span class=p>,</span> <span class=n>world</span> <span class=kr>in</span> <span class=n>regex</span><span class=p>.</span><span class=n>gmatch</span><span class=p>(</span><span class=s2>"(hello)</span><span class=se>\\</span><span class=s2>s+(world)"</span><span class=p>,</span> <span class=n>s</span><span class=p>)</span> <span class=kr>do</span>
<a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a>    <span class=nb>print</span><span class=p>(</span><span class=n>hello</span> <span class=o>..</span> <span class=s2>" "</span> <span class=o>..</span> <span class=n>world</span><span class=p>)</span>
<a href=#__codelineno-0-4 id=__codelineno-0-4 name=__codelineno-0-4></a><span class=kr>end</span>
</code></pre></div> <h2 id=another-example-replacing-words-with-a-regular-expression>Another example: replacing words with a regular expression</h2> <div class=highlight><pre><span></span><code><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a><span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=s2>"hello world John!"</span>
<a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a><span class=nb>print</span><span class=p>(</span><span class=n>regex</span><span class=p>.</span><span class=n>gsub</span><span class=p>(</span><span class=s2>"hello world (.+)!"</span><span class=p>,</span> <span class=n>s</span><span class=p>,</span> <span class=s2>"Hello world $1 Doe!"</span><span class=p>))</span>
</code></pre></div> <h2 id=using-the-regex-api>Using the Regex API</h2> <p>Most Regex API functions accept a <code>Regex</code> object or a string to compile into a regex as their first argument. The only exception is <code>regex:cmatch()</code> which requires the first argument to be a <code>Regex</code> object.</p> <p>For more information regarding PCRE itself, please consult the <a href=https://www.pcre.org/original/doc/html/pcrepattern.html>documentation</a> or a <a href=https://www.debuggex.com/cheatsheet/regex/pcre>cheatsheet</a>.</p> <h3 id=creating-a-regex>Creating a regex</h3> <p>Use <code>regex.compile()</code> to compile a regular expression. Compiling a regular expression is recommended if the user plans to use them frequently.</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=kr>function</span> <span class=nc>regex</span><span class=p>.</span><span class=nf>compile</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span>  <span class=n>string</span><span class=p>,</span>
<a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a>                        <span class=n>options</span><span class=p>:</span> <span class=n>string</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>):</span> <span class=n>Regex</span> <span class=ow>or</span> <span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=n>string</span><span class=p>)</span>
<a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a><span class=kr>end</span>
</code></pre></div> <p>The first argument to the function is the regular expression to compile. The second argument to the function is a string containing one or more pattern modifiers.</p> <ul> <li><code>"i"</code> enables case-insensitive matching</li> <li><code>"m"</code> enables multi-line matching</li> <li><code>"s"</code> matches all characters with the dot (<code>.</code>) meta-character, including newlines.</li> </ul> <p>The function returns a compiled <code>Regex</code> object. If an error occurred, <code>nil</code> is returned along with an error message.</p> <h4 id=example>Example</h4> <div class=highlight><pre><span></span><code><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=s2>"Hello world!</span><span class=se>\n</span><span class=s2>Wow!"</span>
<a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a>
<a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=c1>-- simple regex</span>
<a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=kd>local</span> <span class=n>r</span> <span class=o>=</span> <span class=n>regex</span><span class=p>.</span><span class=n>compile</span> <span class=s2>"([A-Z]+)(,+)"</span>
<a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=c1>-- prints:</span>
<a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=c1>-- H       ello world!</span>
<a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>match</span><span class=p>(</span><span class=n>s</span><span class=p>))</span>
<a href=#__codelineno-3-8 id=__codelineno-3-8 name=__codelineno-3-8></a>
<a href=#__codelineno-3-9 id=__codelineno-3-9 name=__codelineno-3-9></a><span class=c1>-- case-insensitive matching</span>
<a href=#__codelineno-3-10 id=__codelineno-3-10 name=__codelineno-3-10></a><span class=kd>local</span> <span class=n>r</span> <span class=o>=</span> <span class=n>regex</span><span class=p>.</span><span class=n>compile</span><span class=p>(</span><span class=s2>"([A-Z]+)(,+)"</span><span class=p>,</span> <span class=s2>"i"</span><span class=p>)</span>
<a href=#__codelineno-3-11 id=__codelineno-3-11 name=__codelineno-3-11></a><span class=c1>-- prints:</span>
<a href=#__codelineno-3-12 id=__codelineno-3-12 name=__codelineno-3-12></a><span class=c1>-- Hello    world!</span>
<a href=#__codelineno-3-13 id=__codelineno-3-13 name=__codelineno-3-13></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>match</span><span class=p>(</span><span class=n>s</span><span class=p>))</span>
<a href=#__codelineno-3-14 id=__codelineno-3-14 name=__codelineno-3-14></a>
<a href=#__codelineno-3-15 id=__codelineno-3-15 name=__codelineno-3-15></a><span class=c1>-- match all characters with .</span>
<a href=#__codelineno-3-16 id=__codelineno-3-16 name=__codelineno-3-16></a><span class=kd>local</span> <span class=n>r</span> <span class=o>=</span> <span class=n>regex</span><span class=p>.</span><span class=n>compile</span><span class=p>(</span><span class=s2>"([A-Z]+)(,+)"</span><span class=p>,</span> <span class=s2>"is"</span><span class=p>)</span>
<a href=#__codelineno-3-17 id=__codelineno-3-17 name=__codelineno-3-17></a><span class=c1>-- prints:</span>
<a href=#__codelineno-3-18 id=__codelineno-3-18 name=__codelineno-3-18></a><span class=c1>-- Hello    world!</span>
<a href=#__codelineno-3-19 id=__codelineno-3-19 name=__codelineno-3-19></a><span class=c1>-- Wow!</span>
<a href=#__codelineno-3-20 id=__codelineno-3-20 name=__codelineno-3-20></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>match</span><span class=p>(</span><span class=n>s</span><span class=p>))</span>
</code></pre></div> <h3 id=matching-text>Matching text</h3> <p>The Regex API provides low-level matching functions (<code>regex:cmatch()</code>, <code>regex.find_offsets()</code>), and high-level matching functions (<code>regex.match()</code>,<code>regex.find()</code>, <code>regex.gmatch()</code>, <code>regex.gsub()</code>).</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=kr>function</span> <span class=nc>regex</span><span class=p>:</span><span class=nf>cmatch</span><span class=p>(</span><span class=n>subject</span><span class=p>:</span> <span class=n>string</span><span class=p>,</span>
<a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a>                      <span class=n>offset</span><span class=p>:</span>  <span class=n>number</span><span class=p>,</span>
<a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a>                      <span class=n>options</span><span class=p>:</span> <span class=n>number</span><span class=p>):</span> <span class=p>...</span><span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span>
<a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=kr>end</span>
<a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a>
<a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=kr>function</span> <span class=nc>regex</span><span class=p>.</span><span class=nf>find_offsets</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span> <span class=n>string</span> <span class=ow>or</span> <span class=n>Regex</span><span class=p>,</span>
<a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a>                            <span class=n>subject</span><span class=p>:</span> <span class=n>string</span><span class=p>,</span>
<a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a>                            <span class=n>offset</span><span class=p>:</span>  <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>,</span>
<a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a>                            <span class=n>options</span><span class=p>:</span> <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>):</span> <span class=p>...</span><span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span>
<a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a><span class=kr>end</span>
<a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a>
<a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a><span class=kr>function</span> <span class=nc>regex</span><span class=p>.</span><span class=nf>match</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span>  <span class=n>string</span> <span class=ow>or</span> <span class=n>Regex</span><span class=p>,</span>
<a href=#__codelineno-4-13 id=__codelineno-4-13 name=__codelineno-4-13></a>                      <span class=n>subject</span><span class=p>:</span> <span class=n>string</span><span class=p>,</span>
<a href=#__codelineno-4-14 id=__codelineno-4-14 name=__codelineno-4-14></a>                      <span class=n>offset</span><span class=p>:</span>  <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>,</span>
<a href=#__codelineno-4-15 id=__codelineno-4-15 name=__codelineno-4-15></a>                      <span class=n>options</span><span class=p>:</span> <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>):</span> <span class=p>...(</span><span class=n>number</span> <span class=ow>or</span> <span class=n>string</span><span class=p>)</span> <span class=ow>or</span> <span class=kc>nil</span>
<a href=#__codelineno-4-16 id=__codelineno-4-16 name=__codelineno-4-16></a><span class=kr>end</span>
<a href=#__codelineno-4-17 id=__codelineno-4-17 name=__codelineno-4-17></a>
<a href=#__codelineno-4-18 id=__codelineno-4-18 name=__codelineno-4-18></a><span class=kr>function</span> <span class=nc>regex</span><span class=p>.</span><span class=nf>find</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span> <span class=n>string</span> <span class=ow>or</span> <span class=n>Regex</span><span class=p>,</span>
<a href=#__codelineno-4-19 id=__codelineno-4-19 name=__codelineno-4-19></a>                    <span class=n>subject</span><span class=p>:</span> <span class=n>string</span><span class=p>,</span>
<a href=#__codelineno-4-20 id=__codelineno-4-20 name=__codelineno-4-20></a>                    <span class=n>offset</span><span class=p>:</span>  <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>,</span>
<a href=#__codelineno-4-21 id=__codelineno-4-21 name=__codelineno-4-21></a>                    <span class=n>options</span><span class=p>:</span> <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>):</span> <span class=p>...(</span><span class=n>number</span> <span class=ow>or</span> <span class=n>string</span><span class=p>)</span> <span class=ow>or</span> <span class=kc>nil</span>
<a href=#__codelineno-4-22 id=__codelineno-4-22 name=__codelineno-4-22></a><span class=kr>end</span>
<a href=#__codelineno-4-23 id=__codelineno-4-23 name=__codelineno-4-23></a>
<a href=#__codelineno-4-24 id=__codelineno-4-24 name=__codelineno-4-24></a><span class=c1>-- since v2.1.1</span>
<a href=#__codelineno-4-25 id=__codelineno-4-25 name=__codelineno-4-25></a><span class=kr>function</span> <span class=nc>regex</span><span class=p>.</span><span class=nf>gmatch</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span> <span class=n>string</span> <span class=ow>or</span> <span class=n>Regex</span><span class=p>,</span>
<a href=#__codelineno-4-26 id=__codelineno-4-26 name=__codelineno-4-26></a>                      <span class=n>subject</span><span class=p>:</span> <span class=n>string</span><span class=p>,</span>
<a href=#__codelineno-4-27 id=__codelineno-4-27 name=__codelineno-4-27></a>                      <span class=n>offset</span><span class=p>:</span>  <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>,</span>
<a href=#__codelineno-4-28 id=__codelineno-4-28 name=__codelineno-4-28></a>                      <span class=n>options</span><span class=p>:</span> <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>):</span> <span class=kr>function</span><span class=p>():</span> <span class=p>...</span><span class=n>string</span>
<a href=#__codelineno-4-29 id=__codelineno-4-29 name=__codelineno-4-29></a><span class=kr>end</span>
</code></pre></div> <p>The first argument to <code>regex:cmatch()</code> is the subject string. The second argument is an offset in the subject string to indicate when to start matching. The third argument is a number comprised of multiple match options OR-ed together. These options are:</p> <ul> <li><code>regex.ANCHORED</code>: Only matches the start of the input; similar to adding the <code>^</code> meta-character to the regex.</li> <li><code>regex.ENDANCHORED</code>: Only matches the end of the input; similar to adding the <code>$</code> meta-character to the regex.</li> <li><code>regex.NOTBOL</code>: Do not treat beginning of subject string as beginning of line.</li> <li><code>regex.NOTEOL</code>: Do not treat end of subject string as end of line.</li> <li><code>regex.NOTEMPTY</code>: Do not treat an empty subject string as a valid match.</li> <li><code>regex.NOTEMPTY_ATSTART</code>: Do not treat empty string at the start of a subject string as a valid match.</li> </ul> <p><code>regex.find_offsets()</code> accepts the same arguments, but the first argument can be a compiled <code>Regex</code> object or a string while the second and third argument are optional.</p> <p>Both <code>regex:cmatch()</code> and <code>regex.find_offsets()</code> return pairs of numbers indicating the start and end indices of all the matches. The first pair of numbers is the indices of the whole match. If captures were specified in the regex, the rest of the numbers are pairs of start and end indices for each capture.</p> <p>If no matches were found, both functions return <code>nil</code>. Otherwise, if an error occurred, both functions throw an error.</p> <blockquote> <p><strong>Warning</strong> Never use <code>regex:cmatch()</code> as it returns end indices that are off by 1. Instead, use <code>regex:.find_offsets()</code> which have the correct behavior.</p> </blockquote> <h4 id=example_1>Example</h4> <div class=highlight><pre><span></span><code><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a><span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=s2>"Apples, Oranges, Bananas"</span>
<a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a><span class=kd>local</span> <span class=n>r</span> <span class=o>=</span> <span class=n>regex</span><span class=p>.</span><span class=n>compile</span><span class=p>(</span><span class=s2>"([A-Za-z]+),</span><span class=se>\\</span><span class=s2>s*(.+)"</span><span class=p>)</span>
<a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a><span class=c1>-- prints:</span>
<a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a><span class=c1>-- 24</span>
<a href=#__codelineno-5-5 id=__codelineno-5-5 name=__codelineno-5-5></a><span class=nb>print</span><span class=p>(</span><span class=o>#</span><span class=n>s</span><span class=p>)</span>
<a href=#__codelineno-5-6 id=__codelineno-5-6 name=__codelineno-5-6></a><span class=c1>-- prints:</span>
<a href=#__codelineno-5-7 id=__codelineno-5-7 name=__codelineno-5-7></a><span class=c1>-- 1       25      1       7       9       25</span>
<a href=#__codelineno-5-8 id=__codelineno-5-8 name=__codelineno-5-8></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>cmatch</span><span class=p>(</span><span class=n>s</span><span class=p>))</span>
<a href=#__codelineno-5-9 id=__codelineno-5-9 name=__codelineno-5-9></a><span class=c1>-- prints:</span>
<a href=#__codelineno-5-10 id=__codelineno-5-10 name=__codelineno-5-10></a><span class=c1>-- 1       24      1       6       9       24</span>
<a href=#__codelineno-5-11 id=__codelineno-5-11 name=__codelineno-5-11></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>find_offsets</span><span class=p>(</span><span class=n>s</span><span class=p>))</span>
</code></pre></div> <p><code>regex.match()</code> and <code>regex.find()</code> are similar to Lua's <code>string.match()</code> and <code>string.find()</code>.</p> <p>The first argument is the compiled <code>Regex</code> or a string, while the second argument is the subject string to match. The third and fourth argument specify the offset of the string to start matching and match options. The third and fourth argument are optional.</p> <p><code>regex.match()</code> will return all captured strings. If no captures are specified in the regex, it will return the matched string. If a capture is empty, its offset will be returned.</p> <p><code>regex.find()</code> will return the start and end indices of the matched string, followed by the captured strings if any. If a capture is empty, its offset will be returned.</p> <p>Both functions return <code>nil</code> if no match was found.</p> <blockquote> <p><strong>Note</strong> There are no functions that return the start and end indices of captured strings. Use <code>regex.find_offsets()</code> for that.</p> </blockquote> <h4 id=example_2>Example</h4> <div class=highlight><pre><span></span><code><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a><span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=s2>"Apples, Oranges, Bananas"</span>
<a href=#__codelineno-6-2 id=__codelineno-6-2 name=__codelineno-6-2></a><span class=c1>-- prints:</span>
<a href=#__codelineno-6-3 id=__codelineno-6-3 name=__codelineno-6-3></a><span class=c1>-- Apples    Oranges, Bananas</span>
<a href=#__codelineno-6-4 id=__codelineno-6-4 name=__codelineno-6-4></a><span class=nb>print</span><span class=p>(</span><span class=n>regex</span><span class=p>.</span><span class=n>match</span><span class=p>(</span><span class=s2>"([A-Za-z]+),</span><span class=se>\\</span><span class=s2>s*(.+)"</span><span class=p>,</span> <span class=n>s</span><span class=p>))</span>
<a href=#__codelineno-6-5 id=__codelineno-6-5 name=__codelineno-6-5></a><span class=c1>-- prints:</span>
<a href=#__codelineno-6-6 id=__codelineno-6-6 name=__codelineno-6-6></a><span class=c1>-- 1    24    Apples    Oranges, Bananas</span>
<a href=#__codelineno-6-7 id=__codelineno-6-7 name=__codelineno-6-7></a><span class=nb>print</span><span class=p>(</span><span class=n>regex</span><span class=p>.</span><span class=n>find</span><span class=p>(</span><span class=s2>"([A-Za-z]+),</span><span class=se>\\</span><span class=s2>s*(.+)"</span><span class=p>,</span> <span class=n>s</span><span class=p>))</span>
</code></pre></div> <p><code>regex.gmatch()</code> returns an iterator that iterates through all captured groups, or the whole match if no captures are specified in the regex.</p> <p>It accepts the same arguments as <code>regex.find()</code> and <code>regex.match()</code>.</p> <h4 id=example_3>Example</h4> <div class=highlight><pre><span></span><code><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a><span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=s2>"John doe, Jeanne Doe, Jane Doe"</span>
<a href=#__codelineno-7-2 id=__codelineno-7-2 name=__codelineno-7-2></a><span class=c1>-- will print:</span>
<a href=#__codelineno-7-3 id=__codelineno-7-3 name=__codelineno-7-3></a><span class=c1>-- John - Doe</span>
<a href=#__codelineno-7-4 id=__codelineno-7-4 name=__codelineno-7-4></a><span class=c1>-- Jeanne - Doe</span>
<a href=#__codelineno-7-5 id=__codelineno-7-5 name=__codelineno-7-5></a><span class=c1>-- Jane - Doe</span>
<a href=#__codelineno-7-6 id=__codelineno-7-6 name=__codelineno-7-6></a><span class=kr>for</span> <span class=n>first_name</span><span class=p>,</span> <span class=n>last_name</span> <span class=kr>in</span> <span class=n>regex</span><span class=p>.</span><span class=n>gmatch</span><span class=p>(</span><span class=s2>"([A-Za-z]+) ([A-Za-z]+)(,</span><span class=se>\\</span><span class=s2>s*)?"</span><span class=p>,</span> <span class=n>s</span><span class=p>)</span> <span class=kr>do</span>
<a href=#__codelineno-7-7 id=__codelineno-7-7 name=__codelineno-7-7></a>  <span class=nb>print</span><span class=p>(</span><span class=n>first_name</span> <span class=o>..</span> <span class=s2>" - "</span> <span class=o>..</span> <span class=n>last_name</span><span class=p>)</span>
<a href=#__codelineno-7-8 id=__codelineno-7-8 name=__codelineno-7-8></a><span class=kr>end</span>
<a href=#__codelineno-7-9 id=__codelineno-7-9 name=__codelineno-7-9></a>
<a href=#__codelineno-7-10 id=__codelineno-7-10 name=__codelineno-7-10></a><span class=c1>-- will print:</span>
<a href=#__codelineno-7-11 id=__codelineno-7-11 name=__codelineno-7-11></a><span class=c1>-- John</span>
<a href=#__codelineno-7-12 id=__codelineno-7-12 name=__codelineno-7-12></a><span class=c1>-- doe</span>
<a href=#__codelineno-7-13 id=__codelineno-7-13 name=__codelineno-7-13></a><span class=c1>-- Jeanne</span>
<a href=#__codelineno-7-14 id=__codelineno-7-14 name=__codelineno-7-14></a><span class=c1>-- Doe</span>
<a href=#__codelineno-7-15 id=__codelineno-7-15 name=__codelineno-7-15></a><span class=c1>-- Jane</span>
<a href=#__codelineno-7-16 id=__codelineno-7-16 name=__codelineno-7-16></a><span class=c1>-- Doe</span>
<a href=#__codelineno-7-17 id=__codelineno-7-17 name=__codelineno-7-17></a><span class=kr>for</span> <span class=n>name</span> <span class=kr>in</span> <span class=n>regex</span><span class=p>.</span><span class=n>gmatch</span><span class=p>(</span><span class=s2>"</span><span class=se>\\</span><span class=s2>w+"</span><span class=p>,</span> <span class=n>s</span><span class=p>)</span> <span class=kr>do</span>
<a href=#__codelineno-7-18 id=__codelineno-7-18 name=__codelineno-7-18></a>  <span class=nb>print</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
<a href=#__codelineno-7-19 id=__codelineno-7-19 name=__codelineno-7-19></a><span class=kr>end</span>
</code></pre></div> <h3 id=string-substitution>String substitution</h3> <p><code>regex.gsub()</code> can be used to perform simple string substitution.</p> <div class=highlight><pre><span></span><code><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a><span class=kr>function</span> <span class=nc>regex</span><span class=p>.</span><span class=nf>gsub</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span>     <span class=n>string</span> <span class=ow>or</span> <span class=n>Regex</span><span class=p>,</span>
<a href=#__codelineno-8-2 id=__codelineno-8-2 name=__codelineno-8-2></a>                    <span class=n>subject</span><span class=p>:</span>     <span class=n>string</span><span class=p>,</span>
<a href=#__codelineno-8-3 id=__codelineno-8-3 name=__codelineno-8-3></a>                    <span class=n>replacement</span><span class=p>:</span> <span class=n>string</span><span class=p>,</span>
<a href=#__codelineno-8-4 id=__codelineno-8-4 name=__codelineno-8-4></a>                    <span class=n>limit</span><span class=p>:</span>       <span class=n>number</span> <span class=ow>or</span> <span class=kc>nil</span><span class=p>):</span> <span class=p>(</span><span class=n>string</span><span class=p>,</span> <span class=n>number</span><span class=p>)</span>
<a href=#__codelineno-8-5 id=__codelineno-8-5 name=__codelineno-8-5></a><span class=kr>end</span>
</code></pre></div> <p>The first argument is the <code>Regex</code> object or a string, followed by the subject string. The third argument is the replacement string and the last is the maximum number of replacements to make.</p> <p>The function returns the subject string with matches replaced with the replacement string, followed by the number of replacements made.</p> <p>If an error occurred, the function throws an error.</p> <h4 id=replacement-string>Replacement string</h4> <p>The replacement string supports PCRE2 extended substitution syntax.</p> <p>To use named and unnamed capture groups with <code>$n</code> or <code>${n}</code> where <code>n</code> is the group number or name. The extended substitution syntax also supports two extra substitutions:</p> <ul> <li>The form <code>${n:-default}</code> will use <code>default</code> if <code>n</code> is unavailable.</li> <li>The form <code>${n:+iftrue:iffalse}</code> will use <code>iftrue</code> if <code>n</code> is available, otherwise it will use <code>iffalse</code>.</li> </ul> <p>To insert a literal dollar sign (<code>$</code>), use <code>$$</code>.</p> <p>Other than that, <code>\U</code> and <code>\L</code> can be used to toggle uppercase or lowercase, while <code>\u</code> and <code>\l</code> causes the <strong>next character</strong> to be in uppercase or lowercase.</p> <h4 id=example_4>Example</h4> <div class=highlight><pre><span></span><code><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a><span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=s2>"John Doe, Jane Doe, Peter Doe"</span>
<a href=#__codelineno-9-2 id=__codelineno-9-2 name=__codelineno-9-2></a><span class=kd>local</span> <span class=n>r</span> <span class=o>=</span> <span class=n>regex</span><span class=p>.</span><span class=n>compile</span> <span class=s2>"(</span><span class=se>\\</span><span class=s2>w+)"</span>
<a href=#__codelineno-9-3 id=__codelineno-9-3 name=__codelineno-9-3></a>
<a href=#__codelineno-9-4 id=__codelineno-9-4 name=__codelineno-9-4></a><span class=c1>-- prints:</span>
<a href=#__codelineno-9-5 id=__codelineno-9-5 name=__codelineno-9-5></a><span class=c1>-- No No, No No, No No     6</span>
<a href=#__codelineno-9-6 id=__codelineno-9-6 name=__codelineno-9-6></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>gsub</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=s2>"No"</span><span class=p>))</span>
<a href=#__codelineno-9-7 id=__codelineno-9-7 name=__codelineno-9-7></a><span class=c1>-- prints:</span>
<a href=#__codelineno-9-8 id=__codelineno-9-8 name=__codelineno-9-8></a><span class=c1>-- $John $doe, $Jane $Doe, $Peter $Doe     6</span>
<a href=#__codelineno-9-9 id=__codelineno-9-9 name=__codelineno-9-9></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>gsub</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=s2>"($1)"</span><span class=p>))</span>
<a href=#__codelineno-9-10 id=__codelineno-9-10 name=__codelineno-9-10></a><span class=c1>-- prints:</span>
<a href=#__codelineno-9-11 id=__codelineno-9-11 name=__codelineno-9-11></a><span class=c1>-- john doe, jane doe, peter doe   6</span>
<a href=#__codelineno-9-12 id=__codelineno-9-12 name=__codelineno-9-12></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>gsub</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=s2>"</span><span class=se>\\</span><span class=s2>l${1}"</span><span class=p>))</span>
<a href=#__codelineno-9-13 id=__codelineno-9-13 name=__codelineno-9-13></a><span class=c1>-- prints:</span>
<a href=#__codelineno-9-14 id=__codelineno-9-14 name=__codelineno-9-14></a><span class=c1>-- Matched =&gt; John Matched =&gt; doe, Matched =&gt; Jane Matched =&gt; Doe, Matched =&gt; Peter Matched =&gt; Doe 6</span>
<a href=#__codelineno-9-15 id=__codelineno-9-15 name=__codelineno-9-15></a><span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>:</span><span class=n>gsub</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=s2>"${1:+Matched =&gt; $1:No match.}"</span><span class=p>))</span>
</code></pre></div> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 8, 2023</span> </small> </div> </article> </div> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <nav aria-label=Footer class="md-footer__inner md-grid"> <a aria-label="Previous: Simple Plugin" class="md-footer__link md-footer__link--prev" href=../simple-plugin/ rel=prev> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Simple Plugin </div> </div> </a> <a aria-label="Next: Interacting with the OS" class="md-footer__link md-footer__link--next" href=../interacting-with-the-os/ rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Interacting with the OS </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/lite-xl/lite-xl rel=noopener target=_blank title=github.com> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://discord.gg/RWzqC3nx7K rel=noopener target=_blank title=discord.gg> <svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"></path></svg> </a> <a class=md-social__link href=https://matrix.to/#/#lite-xl:matrix.org rel=noopener target=_blank title=matrix.to> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M.632.55v22.9H2.28V24H0V0h2.28v.55zm7.043 7.26v1.157h.033a3.312 3.312 0 0 1 1.117-1.024c.433-.245.936-.365 1.5-.365.54 0 1.033.107 1.481.314.448.208.785.582 1.02 1.108.254-.374.6-.706 1.034-.992.434-.287.95-.43 1.546-.43.453 0 .872.056 1.26.167.388.11.716.286.993.53.276.245.489.559.646.951.152.392.23.863.23 1.417v5.728h-2.349V11.52c0-.286-.01-.559-.032-.812a1.755 1.755 0 0 0-.18-.66 1.106 1.106 0 0 0-.438-.448c-.194-.11-.457-.166-.785-.166-.332 0-.6.064-.803.189a1.38 1.38 0 0 0-.48.499 1.946 1.946 0 0 0-.231.696 5.56 5.56 0 0 0-.06.785v4.768h-2.35v-4.8c0-.254-.004-.503-.018-.752a2.074 2.074 0 0 0-.143-.688 1.052 1.052 0 0 0-.415-.503c-.194-.125-.476-.19-.854-.19-.111 0-.259.024-.439.074-.18.051-.36.143-.53.282a1.637 1.637 0 0 0-.439.595c-.12.259-.18.6-.18 1.02v4.966H5.46V7.81zm15.693 15.64V.55H21.72V0H24v24h-2.28v-.55z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.footer", "navigation.instant", "navigation.tracking", "navigation.top", "navigation.tabs", "content.code.copy", "content.action.view", "content.action.edit", "header.autohide"], "search": "../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.ba449ae6.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>