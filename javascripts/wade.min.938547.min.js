!function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.Wade=t()}(this,function(){var n={stopWords:["about","after","all","also","am","an","and","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","has","had","he","have","her","here","him","himself","his","how","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","see","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your","a","i"],punctuationRE:/[.,!?:;"']/g},s=function(e,t){for(var n=t,s=0;s<e.length&&void 0!==(n=n[e[s]]);s++);return n},o=function(e,t,n,s){for(var o,a=null,i=0;i<e.length;i++)o=e[i],void 0===(a=n[o])?(n[o]=t.length,t.push({index:o,score:s})):t[a].score+=s},i=function(e,t,n,i,a){var r=s(e,t);void 0!==r&&void 0!==r.id&&o(r.id,n,i,a)},a=function(e,t,n,i,a){if(l=s(e,t),void 0!==l)for(var l,u,r=[l],c=null,d=0;0!==r.length;){void 0!==(c=r[d]).id&&o(c.id,n,i,a),r.pop(),d--;for(u in c)r.push(c[u]),d++}},t=function(e){var t=e.length-1;return" "===e[0]&&(e=e.substring(1))," "===e[t]&&(e=e.substring(0,t)),e.split(" ")},r=function(e){return e.toLowerCase()},c=function(e){return e.replace(n.punctuationRE,"")},l=function(n){for(var s=t(n),o=s.length;0!=o--;)-1!==e.config.stopWords.indexOf(s[o])&&s.splice(o,1);return s.join(" ")},e=function(n){if(s=function(n){if(o=s.index,r=e.process(n),!1===r)return[];for(var o,r,c=t(r),u=c.length,h=u-1,m=1/u,l=[],f={},d=0;d<h;d++)i(c[d],o,l,f,m);return a(c[h],o,l,f,m),l},Array.isArray(n)){for(var s,c=n.length,r=new Array(c),l=null,o=0;o<c;o++)!1!==(l=e.process(n[o]))&&(r[o]=l);s.index=e.index(r),s.data=r}else s.index=n.index,s.data=n.data;return s};return e.pipeline=[r,c,l],e.process=function(t){for(var s=e.pipeline,n=0;n<s.length;n++)t=s[n](t);return 0!==t.length&&t},e.index=function(e){for(r={},s=0;s<e.length;s++)if(c=e[s],void 0!==c)for(l=t(c),i=0;i<l.length;i++){for(var s,o,i,a,r,c,l,h,d=l[i],m=d.length-1,n=r,u=0;u<m;u++)h=d[u],o=n[h],o=void 0===o?{}:o,n[h]=o,n=o;a=d[m],void 0===n[a]?n[a]={id:[s]}:void 0===(n=n[a]).id?n.id=[s]:n.id.push(s)}return r},e.save=function(e){return{data:e.data,index:e.index}},e.config=n,e.version="0.3.3",e})